$(function (){	$('.search-text').keyup(function(){		var term = $(this).val();		var searchBtn = $(this).closest('.search-box').find('.search-button');		if(term != '')			searchBtn.removeAttr("disabled");		else			searchBtn.attr("disabled", "disabled");	}).keyup();});//edited 20171005 by Nick to allow sorting status via parameter//edited 20171017 by Nick fix sorting bug//edited 20190129 by Nick changed the site url //need to edit again to add advance search for federated searchfunction get_search_results_ajax( to_sort , is_not_adv_search){		lang_key = get_lang_key('search', 'search');	 	var siteUrl = site_url('pages/advance_search_results');			var adv_search_val = '';	var keyword_all_val = $('input[name="keyword_all"]').val();	var keyword_exact_val = $('input[name="keyword_exact"]').val();	var keyword_any_val = $('input[name="keyword_any"]').val();	var keyword_none_val = $('input[name="keyword_none"]').val();	var type_specific_val = [];	var type_filter_val = [];	var specific_value_obj = '';	var filter_value_obj = '';	var to_redirect = '0';		if($('input[name="adv_search"]').length != 0){		adv_search_val = $('input[name="adv_search"]').val();	}else{		if(is_not_adv_search){			adv_search_val = $('#search_term').html();		}	}	if($('#specific-searching').length != 0){		specific_value_obj = $('#specific-searching').select2('data');		$.each( specific_value_obj, function( key, obj_value){					$.each( obj_value, function (key, value){				if(key == 'id'){					type_specific_val.push(value);				}			});				});		}		if($('#filter-searching').length != 0){		filter_value_obj = $('#filter-searching').select2('data');		$.each( filter_value_obj, function( key, obj_value){					$.each( obj_value, function (key, value){				if(key == 'id'){					type_filter_val.push(value);				}			});				});	}			if(type_filter_val.length == 0)		type_filter_val.push('all');		if(type_specific_val.length == 0)		type_specific_val.push('all');		//used to perform ajax or redirect	if($('.div_search_results').length == 0){		$('#to_redirect').val('1');		$('#specific_type_hidden').val(JSON.stringify(type_specific_val));		$('#filter_type_hidden').val(JSON.stringify(type_filter_val));		$('#adv_search_form').submit();	}	else{				var start_time = $.now();		$.ajax({			url: siteUrl,			type: "POST",			data: 	{				'is_search_ajax' : true,				'is_adv_search' : true,				'adv_search' : adv_search_val,				'keyword_all' : keyword_all_val,				'keyword_exact' : keyword_exact_val,				'keyword_any' : keyword_any_val,				'keyword_none' : keyword_none_val,				'type_specific' : type_specific_val,				'type_filter' : type_filter_val,				'to_redirect' : to_redirect,				'to_sort' : to_sort,			},			async: false,      			success: function (data){               										$('#advance_search_box').removeClass("display_adv_block");				$('#search').prop("disabled", false);				//$(".dropdown").hide();								$('.preloader').removeClass("preloader-display");				var end_time = $.now();																if($('#adv_search_results').length == 0){					$('.div_search_results').before('<div id="adv_search_results"> </div>');						$('div').remove(".div_search_results");					}							$('#adv_search_results').html(data);				$('.search_header p').first().append('<span id="timer_in_milliseconds"> (' + millisToMinutesAndSeconds(end_time - start_time) + ') ' + lang_key['SEARCH_ADV_TIMER_LBL'] + ' </span>');			}		});  	}	}function millisToMinutesAndSeconds(millis) {  //var minutes = Math.floor(millis / 60000);  var seconds = ((millis % 60000) / 1000);//.toFixed(0);      return (seconds < 10 ? '0' : '') + seconds;}